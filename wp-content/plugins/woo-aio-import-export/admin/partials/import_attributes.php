<h1>Export Attributes</h1>
<?php
include WOOAIOIE_PATH . 'admin/partials/menu.php';
global $wpdb;
$ser_attr = 'a:4:{i:0;a:7:{s:12:"attribute_id";s:1:"1";s:14:"attribute_name";s:17:"color_temperature";s:15:"attribute_label";s:39:"Цветовая температура";s:14:"attribute_type";s:4:"text";s:17:"attribute_orderby";s:4:"name";s:16:"attribute_public";s:1:"1";s:15:"attribute_terms";a:3:{i:0;a:7:{s:16:"term_taxonomy_id";s:2:"27";s:8:"taxonomy";s:20:"pa_color_temperature";s:4:"name";s:4:"4500";s:4:"slug";s:4:"4500";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:26:"order_pa_color_temperature";s:10:"meta_value";s:1:"0";}}}i:1;a:7:{s:16:"term_taxonomy_id";s:2:"28";s:8:"taxonomy";s:20:"pa_color_temperature";s:4:"name";s:4:"5200";s:4:"slug";s:4:"5200";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:26:"order_pa_color_temperature";s:10:"meta_value";s:1:"0";}}}i:2;a:7:{s:16:"term_taxonomy_id";s:2:"29";s:8:"taxonomy";s:20:"pa_color_temperature";s:4:"name";s:4:"6000";s:4:"slug";s:4:"6000";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:26:"order_pa_color_temperature";s:10:"meta_value";s:1:"0";}}}}}i:1;a:7:{s:12:"attribute_id";s:1:"2";s:14:"attribute_name";s:11:"car_company";s:15:"attribute_label";s:31:"Марка автомобиля";s:14:"attribute_type";s:6:"select";s:17:"attribute_orderby";s:10:"menu_order";s:16:"attribute_public";s:1:"1";s:15:"attribute_terms";a:41:{i:0;a:7:{s:16:"term_taxonomy_id";s:2:"41";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:4:"Ford";s:4:"slug";s:4:"ford";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:1;a:7:{s:16:"term_taxonomy_id";s:2:"33";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:4:"Audi";s:4:"slug";s:4:"audi";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:2;a:7:{s:16:"term_taxonomy_id";s:2:"38";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:3:"BMW";s:4:"slug";s:3:"bmw";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:3;a:7:{s:16:"term_taxonomy_id";s:2:"35";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:9:"Chevrolet";s:4:"slug";s:9:"chevrolet";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:4;a:7:{s:16:"term_taxonomy_id";s:2:"39";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:5:"Buick";s:4:"slug";s:5:"buick";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:5;a:7:{s:16:"term_taxonomy_id";s:2:"40";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:7:"Citroen";s:4:"slug";s:7:"citroen";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:6;a:7:{s:16:"term_taxonomy_id";s:2:"42";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:5:"Geely";s:4:"slug";s:5:"geely";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:7;a:7:{s:16:"term_taxonomy_id";s:2:"43";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:10:"Great Wall";s:4:"slug";s:9:"greatwall";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:8;a:7:{s:16:"term_taxonomy_id";s:2:"44";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:5:"Honda";s:4:"slug";s:5:"honda";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:9;a:7:{s:16:"term_taxonomy_id";s:2:"45";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:7:"Hyundai";s:4:"slug";s:7:"hyundai";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:10;a:7:{s:16:"term_taxonomy_id";s:2:"46";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:3:"Kia";s:4:"slug";s:3:"kia";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:11;a:7:{s:16:"term_taxonomy_id";s:2:"47";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:4:"LADA";s:4:"slug";s:4:"lada";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:12;a:7:{s:16:"term_taxonomy_id";s:2:"48";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:5:"Lexus";s:4:"slug";s:5:"lexus";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:13;a:7:{s:16:"term_taxonomy_id";s:2:"49";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:5:"Mazda";s:4:"slug";s:5:"mazda";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:14;a:7:{s:16:"term_taxonomy_id";s:2:"50";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:8:"Mercedes";s:4:"slug";s:8:"mercedes";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:15;a:7:{s:16:"term_taxonomy_id";s:2:"51";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:2:"MG";s:4:"slug";s:2:"mg";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:16;a:7:{s:16:"term_taxonomy_id";s:2:"52";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:10:"Mitsubishi";s:4:"slug";s:10:"mitsubishi";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:17;a:7:{s:16:"term_taxonomy_id";s:2:"53";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:6:"Nissan";s:4:"slug";s:6:"nissan";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:18;a:7:{s:16:"term_taxonomy_id";s:2:"54";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:4:"Opel";s:4:"slug";s:4:"opel";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:19;a:7:{s:16:"term_taxonomy_id";s:2:"55";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:7:"Peugeot";s:4:"slug";s:7:"peugeot";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:20;a:7:{s:16:"term_taxonomy_id";s:2:"56";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:7:"Renault";s:4:"slug";s:7:"renault";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:21;a:7:{s:16:"term_taxonomy_id";s:2:"57";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:10:"Ssang Yong";s:4:"slug";s:9:"ssangyong";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:22;a:7:{s:16:"term_taxonomy_id";s:2:"58";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:5:"Skoda";s:4:"slug";s:5:"skoda";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:23;a:7:{s:16:"term_taxonomy_id";s:2:"59";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:6:"Subaru";s:4:"slug";s:6:"subaru";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:24;a:7:{s:16:"term_taxonomy_id";s:2:"60";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:6:"Toyota";s:4:"slug";s:6:"toyota";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:25;a:7:{s:16:"term_taxonomy_id";s:2:"61";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:10:"Volkswagen";s:4:"slug";s:10:"volkswagen";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:26;a:7:{s:16:"term_taxonomy_id";s:2:"62";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:6:"Daewoo";s:4:"slug";s:6:"daewoo";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:27;a:7:{s:16:"term_taxonomy_id";s:2:"63";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:5:"Chery";s:4:"slug";s:5:"chery";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:28;a:7:{s:16:"term_taxonomy_id";s:2:"64";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:4:"Seat";s:4:"slug";s:4:"seat";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:29;a:7:{s:16:"term_taxonomy_id";s:2:"65";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:7:"Porsche";s:4:"slug";s:7:"porsche";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:30;a:7:{s:16:"term_taxonomy_id";s:2:"66";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:6:"Suzuki";s:4:"slug";s:6:"suzuki";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:31;a:7:{s:16:"term_taxonomy_id";s:2:"67";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:4:"Fiat";s:4:"slug";s:4:"fiat";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:32;a:7:{s:16:"term_taxonomy_id";s:2:"68";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:10:"Alfa Romeo";s:4:"slug";s:10:"alfa-romeo";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:33;a:7:{s:16:"term_taxonomy_id";s:2:"69";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:5:"Volvo";s:4:"slug";s:5:"volvo";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:34;a:7:{s:16:"term_taxonomy_id";s:2:"71";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:8:"Infiniti";s:4:"slug";s:8:"infiniti";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:35;a:7:{s:16:"term_taxonomy_id";s:2:"72";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:3:"ZAZ";s:4:"slug";s:3:"zaz";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:36;a:7:{s:16:"term_taxonomy_id";s:2:"81";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:11:"Range Rover";s:4:"slug";s:11:"range-rover";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:37;a:7:{s:16:"term_taxonomy_id";s:2:"82";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:10:"Land Rover";s:4:"slug";s:10:"land-rover";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:38;a:7:{s:16:"term_taxonomy_id";s:2:"88";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:5:"Smart";s:4:"slug";s:5:"smart";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:39;a:7:{s:16:"term_taxonomy_id";s:2:"90";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:7:"Bentley";s:4:"slug";s:7:"bentley";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}i:40;a:7:{s:16:"term_taxonomy_id";s:2:"99";s:8:"taxonomy";s:14:"pa_car_company";s:4:"name";s:4:"Jeep";s:4:"slug";s:4:"jeep";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_car_company";s:10:"meta_value";s:1:"0";}}}}}i:2;a:7:{s:12:"attribute_id";s:1:"4";s:14:"attribute_name";s:11:"active_park";s:15:"attribute_label";s:33:"Активная разметка";s:14:"attribute_type";s:6:"select";s:17:"attribute_orderby";s:10:"menu_order";s:16:"attribute_public";s:1:"0";s:15:"attribute_terms";a:1:{i:0;a:7:{s:16:"term_taxonomy_id";s:2:"79";s:8:"taxonomy";s:14:"pa_active_park";s:4:"name";s:33:"активная разметка";s:4:"slug";s:11:"active_line";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:20:"order_pa_active_park";s:10:"meta_value";s:1:"0";}}}}}i:3;a:7:{s:12:"attribute_id";s:1:"5";s:14:"attribute_name";s:9:"brand_cam";s:15:"attribute_label";s:10:"Бренд";s:14:"attribute_type";s:6:"select";s:17:"attribute_orderby";s:10:"menu_order";s:16:"attribute_public";s:1:"1";s:15:"attribute_terms";a:2:{i:0;a:7:{s:16:"term_taxonomy_id";s:2:"86";s:8:"taxonomy";s:12:"pa_brand_cam";s:4:"name";s:7:"Prime-X";s:4:"slug";s:7:"prime-x";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:18:"order_pa_brand_cam";s:10:"meta_value";s:1:"0";}}}i:1;a:7:{s:16:"term_taxonomy_id";s:2:"87";s:8:"taxonomy";s:12:"pa_brand_cam";s:4:"name";s:8:"IL Trade";s:4:"slug";s:8:"il-trade";s:11:"description";s:0:"";s:6:"parent";s:1:"0";s:4:"meta";a:1:{i:0;a:2:{s:8:"meta_key";s:18:"order_pa_brand_cam";s:10:"meta_value";s:1:"0";}}}}}}';

$ser_attr = '';

if (empty($ser_attr)) {
    return;
}

echo "<pre>";
$attr = unserialize($ser_attr);
$existed_attr = wc_get_attribute_taxonomies();

foreach ($attr as $attr_item) {
    $attr_terms = $attr_item['attribute_terms'];
    $existed = false;

    unset($attr_item['attribute_terms']);

    foreach ($existed_attr as $existed_attr_item) {
        if ($existed_attr_item->attribute_name === $attr_item['attribute_name']) {
            $existed = $existed_attr_item->attribute_id;
        }
    }

    $attr_args = array (
        'name' => $attr_item['attribute_label'],
        'slug' => $attr_item['attribute_name'],
        'type' => $attr_item['attribute_type'],
        'order_by' => $attr_item['attribute_orderby'],
    );

    if (!empty($attr_item['attribute_public'])) {
        $attr_args['has_archives'] = true;
    }

    if (!empty($existed)) {
        $attr_args['id'] = $existed;
    }

    $create_id = wc_create_attribute( $attr_args );

    foreach ($attr_terms as $attr_terms_item) {
        print_r($attr_terms_item);
        $created_attr_id = wooaioie_add_term($attr_terms_item, $parent_id = 0, 'product_attr_ID', $attr_terms_item['taxonomy']);

        if (!empty($created_attr_id) && !empty($attr_terms_item["meta"])) {
            wooaioie_add_term_meta($created_attr_id, $attr_terms_item["meta"]);
        }
    }

//    var_dump($create_id);
//    var_dump($attr_args);
//    var_dump($existed);
//    print_r($attr_item);

}

// print_r($existed_attr);
echo "</pre>";